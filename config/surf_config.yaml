data_sources:

  # Debug to be used in dev
  debug: False # Turn on to true if debugging to make bottlenecks run faster

  # Geographic location for Bolinas surf point
  # (used to pick sunrise/sunset and wind forecasts)
  location_lat: 37.9094     # decimal degrees (Bolinas beach approx)
  location_lon: -122.6864   # decimal degrees (Bolinas beach approx)

  # Closest WW3 grid node (roughly offshore Golden Gate region)
  # Note: WW3 longitudes are 0–360, so -122.7 ≈ 237.3 deg
  ww3_lat: 37.5             # WW3 grid latitude
  ww3_lon: 237.0            # WW3 grid longitude (0–360 longitude format)
  max_partitions: 3         # maximum number of unique swells to partition from WW3
  ww3_url: "https://thredds.ucar.edu/thredds/dodsC/grib/NCEP/WW3/Global/Best/latest" # URL for fetching the ww3 forecast

  # NOAA tide station ID (9414290 = SF Golden Gate)
  # Alternatives:
  #   9414958 = Bolinas Lagoon 
  tide_station: "9414290"

  # Local coastline orientation (degrees, where waves are parallel)
  # Used for wind offshore/onshore logic
  coast_orientation: 165    # SSE facing cliff/shore orientation

  # Number of hourly forecast points to pull & compute
  forecast_hours: 168       # 7 days (24 * 7)


surf_model:

  propagation:
    # ---- SOUTH (unblocked directions) ----
    # Degrees where swell points directly into Bolinas and is fully exposed.
    south_sweet_spot: [170, 225]     # almost due south swells wrap in clean
    # Near-south angles that still work well but slightly less than perfect.
    south_edges: [150, 240]          # nearby directions with partial exposure
    south_edge_period_mid: 8        # minimum period for bonus wrap when large
    south_edge_base: 0.7            # minimum south edge contribution
    south_edge_bonus: 0.25          # maximum additional wrap when period large


    # ---- WEST (classic wrap) ----
    west_range: [240, 280]           # W to WNW, classic wrapping range
    west_period_mid: 11.5             # logistic center period where wrapping starts
    west_period_k: 0.8               # steepness of period transition (higher = sharper)
    west_height_mid: 3.5               # logistic center height for west wrap
    west_height_k: 0.8               # steepness of size contribution
    west_base: 0.15                   # minimum west contribution (small wrap)
    west_bonus: 0.6                  # maximum additional wrap when period+size large
    
    # ---- NW (rare wrap events) ----
    nw_range: [280, 300]             # NW to NNW — heavily blocked normally
    nw_period_mid: 11.5              # Logistic center: is the "unlock" point for Bolinas wrap
    nw_period_k: 0.8                 # steepness of period transition (higher = sharper) 
    nw_height_mid: 5.0               # Logistic center: offshore size needed for meaningful wrap
    nw_height_k: 0.5                 # steepness of size contribution
    nw_base: 0.05                    # Dropped to 0.05: NW is weaker than West by default
    nw_bonus: 0.45                   # Max possible wrap becomes 0.50 (base + bonus)

    # ---- BLOCKED ----
    blocked_value: 0.05              # anything outside above ranges = mostly blocked


  # === Nearshore shoaling and energy decay ===
  nearshore:
    base_factor: 0.85         # typical offshore→nearshore shoaling
    range_factor: 0.15        # ±15% spread for min/max surf range
    range_period_min: 10      # minimum period where range_factor starts increasing
    range_step: 0.02          # % by which range_factor spread increases per period second > range_period_min


  # === Wave energy weight ===
  energy:
    height_exp: 2.0           # Physical energy density (squared height)
    period_exp: 1.0           # Physical power/flux (linear period importance)
    energy_k: 0.15            # controls curve steepness for all spots
    swell_saturation: 1.0     # governs how quickly swell score approaches 10


  # === Period multiplier (groundswell vs windswell) ===
  period_multiplier:
    min: 0.3                  # minimum multiplier (short-period wind swell)
    max: 1.2                  # maximum multiplier (long-period groundswell)
    midpoint: 10              # period at midpoint of logistic curve
    steepness: 0.8            # how quickly multiplier transitions around midpoint


  # === Tide scoring ===
  tide:
    optimal_low: -1.0         # ideal tide window lower bound (ft MLLW)
    optimal_high: 3.0         # ideal tide window upper bound
    edge_score: 8.5           # the tide score at the optimal_high and optimal_low edges
    outside_decay: 1.0        # the speed of tide quality dropoff outside the optimal window

  # === Wind categorization ===
  wind:
    offshore_threshold_deg: 45.0   # max angle from offshore to be considered offshore
    onshore_threshold_deg: 135.0   # min angle from offshore to be considered onshore
    offshore_weight: 1.0           # Offshore wind can be handled to a higher MPH
    crosshore_weight: 0.6          # Crosshore wind has a medium penalty
    onshore_weight: 0.4            # Onshore wind has the highest penalty
    glassy_cutoff: 8.0             # MPH Speed where direction starts to fully matter
    speed_midpoint: 13.0           # MPH Speed where even offshore surf is only 5/10
    speed_k: 0.3                   # How fast the score drops as wind increases

  # === Final score weightings ===
  weights:
    swell: 0.5                    # weight of swell score in final result
    wind: 0.2                     # weight of wind score
    tide: 0.2                     # weight of tide score
    baseline: 10.0                # baseline surf value (small clean surf)
    wind_swell_threshold: 3.0     # The swell_score required for wind to have 100% weight; scales wind impact down for smaller surf.
    tide_swell_offset: 5.0        # Higher offset means the tide has a "stronger vote" even on small days.
    tide_min_influence: 0.5       # The minimum multiplier for tide influence (0.5 = 50% impact minimum)
